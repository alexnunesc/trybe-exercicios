O c√≥digo acima adiciona dois novos endpoints GET / e GET /:id. O novo endpoint GET / cont√©m um bloco try/catch, que √© respons√°vel por responder a requisi√ß√£o. Dentro do bloco try temos uma chamada para a fun√ß√£o findAll (ainda n√£o foi implementada no arquivo src/db/peopleDB.js, mas o faremos em breve), que retorna uma Promise (por isso temos um await aqui) e realiza a desconstru√ß√£o da resposta, armazenando na constante result.

A constante result cont√©m a lista de pessoas e a mesma √© retornada como resposta. Caso ocorra algum erro durante a requisi√ß√£o, o bloco catch responder√° com um c√≥digo de estado 500 e a mensagem de erro do mysql2.

J√° o endpoint GET /:id tamb√©m cont√©m um bloco try/catch, que √© respons√°vel por responder a requisi√ß√£o tamb√©m! Dentro do bloco try temos uma chamada para a fun√ß√£o findById (ainda n√£o foi implementada no arquivo src/db/peopleDB.js, mas o faremos em breve), que recebe o par√¢metro de requisi√ß√£o id (obtido da desestrutura√ß√£o de req.params) e retorna uma Promise (por isso temos tamb√©m um await aqui), realizando a desestrutura√ß√£o da resposta e armazenando na constante result.

A constante result cont√©m um array de pessoas. Por√©m, nesse endpoint essa lista pode ter nenhum objeto (situa√ß√£o na qual n√£o existe uma pessoa no banco de dados com o id passado como par√¢metro) ou um objeto. Por essa raz√£o temos um bloco if/else para avaliar se o tamanho do array result √© maior que zero.

Se o tamanho do array result for maior que zero, uma pessoa foi encontrada no banco de dados e √© retornada como resposta da requisi√ß√£o com c√≥digo de estado 200. Caso contr√°rio, ser√° retornada como resposta da requisi√ß√£o uma mensagem com status 404 indicando que uma pessoa n√£o foi encontrada.

Se executarmos os nossos testes com o comando npm test novamente, eles ir√£o falhar e apresentar uma mensagem de erro indicando que findAll e findById n√£o s√£o fun√ß√µes. O motivo desse erro √© que realizamos a chamada dessas fun√ß√µes no arquivo src/routes/peopleRoutes.js, mas n√£o as criamos no arquivo src/db/peopleDB.js (lembre-se do esp√≠rito do TDD üòé).